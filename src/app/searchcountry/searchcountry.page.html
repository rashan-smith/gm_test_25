<app-pcdc-header></app-pcdc-header>
<ion-content class="font_open_sans">
  <ion-button class="button_disable_hover" fill="clear" [routerLink]="['/register-school']">
    <ion-img src="assets/images/back_button.svg" name="arrow-back-outline" class="backIcon"></ion-img>
  </ion-button>
  <div class="container">
    <div class="welcomebg1">
      <div>
        <div class="search-label" [translate]="'searchCountry.detected-auto'"></div>
        <ion-item lines="none" class="searchCountry"
          [ngClass]="(selectedCountry !== '' && selectedCountry !== detectedCountry && isPcdcCountry !== false) ? 'warning_color' : this.isPcdcCountry === false ? 'error_color' : ''">
          <ion-label class="label" [translate]="'searchCountry.country'"></ion-label>
          <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="filterCountries($event)" debounce="300"
            placeholder="Search country..."></ion-searchbar>
          <ion-img
            *ngIf="this.isPcdcCountry === false  ||( this.isPcdcCountry === false && this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry)"
            class="img_wifi" src="assets/images/error_country.svg"></ion-img>

          <ion-img
            *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry || (this.isPcdcCountry === false && this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry)"
            class="img_wifi"
            [ngClass]="{'margin_on_condition': this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry === false}"
            src="assets/images/warning.svg"></ion-img>

        </ion-item>

        <ion-list *ngIf="filteredCountries.length > 0" class="scrollable scrollable_content">
          <ion-item button="true" class="dropdown_list" *ngFor="let country of filteredCountries" (click)="selectCountry(country)"> {{
            country.name }}
            <!-- <ion-button fill="clear" color="dark" class="dropdown_list button_disable_hover" (click)="selectCountry(country)"> -->
            <!-- </ion-button> -->
           </ion-item>
        </ion-list>
        <div *ngIf="automaticSearched && !(this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry) && !filteredCountries.length"
          class="automatic_label change-country" [translate]="'searchCountry.change-country'"></div>
        <div class="error"
          *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry !== false">
          1 error</div>
        <div class="error"
          *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry === false">
          2 error(s)</div>
        <span class="error_message" *ngIf="this.isPcdcCountry === false">
          <ion-img
            *ngIf="this.isPcdcCountry === false  ||( this.isPcdcCountry === false && this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry) || (this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry === false)"
            class="error_icon" src="assets/images/error_country.svg"></ion-img>
          <span *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry !== false" class="red-dot"></span>

          <div class="search-label-error" [translate]="'searchCountry.not-available'"
            [translateParams]="{ appName, appNameSuffix }">
          </div>
        </span>
        <span class="error_message" *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry">
          <ion-img  class="error_icon"  *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry === false"  src="assets/images/warning.svg"></ion-img>
          <span *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry && this.isPcdcCountry !== false" class="red-dot"></span>

          <div class="search-label-error" [translate]="'searchCountry.country-not-accurate'"></div>
        </span>
        <div *ngIf="this.selectedCountry !=='' && this.selectedCountry !== this.detectedCountry" class="search-label"
          [translate]="'searchCountry.please-double-check'"></div>


      </div>
      <div class="bottom-layout">
        <ion-button color="primary" appEnterKeyClick block class="dailycheck_btn btn_margin" [disabled]="!selectedFromList && !automaticSearched"
          (click)="confirmCountry()"><span class="submit_button_size" [translate]="'Confirm'"></span></ion-button>
      </div>
    </div>
  </div>
</ion-content>